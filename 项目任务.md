#项目任务

##数据获取与预处理
***
###Landsat数据预处理
***
####QA处理
QA波段含义
```javascript
Bit 0: 填充 (Fill)。这个比特用于表示该像元在图像中不存在或被遮挡，比如云或阴影。
Bit 1: 膨胀的云 (Dilated Cloud)。这个比特用于表示该像元周围存在云的可能性。
Bit 2: 卷云（高置信度）(Cirrus (high confidence))。这个比特用于表示该像元周围存在卷云，并且可信度高。
Bit 3: 云 (Cloud)。这个比特用于表示该像元为云。
Bit 4: 云阴影 (Cloud Shadow)。这个比特用于表示该像元被云阴影覆盖。
Bit 5: 雪 (Snow)。这个比特用于表示该像元为雪覆盖。
Bit 6: 清晰 (Clear)。如果为1，则说明该像素可以使用，如果为0，则说明该像素包含云或者阴影等干扰，需要排除掉。
Bit 7: 水 (Water)。这个比特用于表示该像元为水体。
Bits 8-9: 云可信度 (Cloud Confidence)。这两个比特用于表示云的可信度，共分为四个等级：无、低、中、高。
Bits 10-11: 云阴影可信度 (Cloud Shadow Confidence)。这两个比特用于表示云阴影的可信度，共分为四个等级：无、低、中、高。
Bits 12-13: 雪/冰可信度 (Snow/Ice Confidence)。这两个比特用于表示雪/冰的可信度，共分为四个等级：无、低、中、高。
Bits 14-15: 卷云可信度 (Cirrus Confidence)。这两个比特用于表示卷云的可信度，共分为四个等级：无、低、中、高。
```

处理前
![](./asset/qa%E5%A4%84%E7%90%86%E5%89%8D.png)

处理后
![](./asset/qa%E5%A4%84%E7%90%86%E5%90%8E.png)
***

####重命名波段和应用尺度因子

Landsat8 和754 用于计算NDVI的波段不同。
* Landsat8：'SR_B5','SR_B4','SR_B3'
* Landsat7：'SR_B4','SR_B3','SR_B2'

统一重命名为：'nir','red','green'

Landsat8 7 5 4 的定标参数都相同
乘以尺度因子(0.0000275)再加(-0.2)
***
####按照年份分类

* 给每张影像添加‘year’属性

* 定义一个数据集**yearsCol**，其中的每个image是值等于所在年度的常数图像。具有属性‘year’。
* 将L7Col 和 L8Col 合并为mergedCol
* 使用ee.Join.saveAll函数，根据year属性将mergedCol中的图像分类到yearsCol中每一年图像的属性**images**下。
***
####计算年最大值NDVI和年有效观测数

对yearCol 进行一个map循环，取出存在属性**images**下的每一年的数据，计算
* 每一年的有效观测数
* 该年所有影像的NDVI

再进行年最大值NDVI合成。

对于部分区域，其年观测值竟然达到了60+个，按道理来说，Landsat8的回归周期16天，一年应该也就23个左右的观测。

查过资料以后，应该是条带重复的问题。每次过境由于条带重复，在重复区的位置多了很多观测值。包括前后重叠和左右重叠。

**Landsat 8的轨道宽度为185千米（115英里），这意味着它在每次通过时都会覆盖一个宽度为185千米的区域。由于地球是圆形的，所以Landsat 8的轨道会有所重叠，这种重叠（或侧重叠）从赤道处的7%变化到极端纬度处的最大值约85%。因此，在两次观测之间，即使时间间隔不足16天，也可能在不同的条带上观测到同一观测点。**

***
#### 将年最大值NDVI数据导出到Asset中







###MODIS数据预处理

###高程数据预处理